### –ú–ò–§–ò –õ–∞–±–∞—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã. –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ —Å–∏—Å—Ç–µ–º—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:

```
Spring Boot ‚Üí NATS JetStream ‚Üí Apache NiFi ‚Üí Apache HBase
```

### 1. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker-compose up -d
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã HBase

```bash
chmod +x scripts/create-hbase-table.sh
./scripts/create-hbase-table.sh
```

### 3. –î–æ—Å—Ç—É–ø –∫ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL | Credentials |
|--------|-----|-------------|
| **NiFi UI** | https://localhost:8443/nifi | admin / adminadminadmin |
| **HBase Master UI** | http://localhost:16010 | - |
| **NATS Monitoring** | http://localhost:8222/jsz?streams=true | - |

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

TODO

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å NATS Stream
```bash
docker exec mephi-nats nats stream info METRICS
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HBase
```bash
docker exec -it mephi-hbase hbase shell
scan 'system_metrics', {LIMIT => 10}
```

## Lab 4: Apache Spark - –ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ñ–∏–∫–∞

**–¶–µ–ª—å:** –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å AVG(bytesReceived/bytesSent) —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 10 –º–∏–Ω—É—Ç.

**–ó–∞–ø—É—Å–∫:**

```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
./scripts/create-result-table.sh

# 2. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
cd spark-app
./gradlew shadowJar
docker exec mephi-spark sh -c "/opt/spark/bin/spark-submit --class NetworkTrafficAnalyzer --master local[*] /opt/spark-apps/network-analyzer.jar"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
docker exec -i mephi-hbase hbase shell
> scan 'network_traffic_analysis', {LIMIT => 5}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `spark-app/` - standalone Kotlin –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `NetworkTrafficAnalyzer.kt` - –≤–µ—Å—å –∫–æ–¥ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ (204 —Å—Ç—Ä–æ–∫–∏)

**UI:**
- Spark Web UI: http://localhost:8080