### –ú–ò–§–ò –õ–∞–±–∞—Ä–∞—Ç–æ—Ä–Ω—ã–µ —Ä–∞–±–æ—Ç—ã. –û–±—Ä–∞–±–æ—Ç–∫–∞ –±–æ–ª—å—à–∏—Ö –¥–∞–Ω–Ω—ã—Ö

## üìã –û–ø–∏—Å–∞–Ω–∏–µ –ø—Ä–æ–µ–∫—Ç–∞

–†–∞—Å–ø—Ä–µ–¥–µ–ª—ë–Ω–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞ —Å–±–æ—Ä–∞, –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∏ —Ö—Ä–∞–Ω–µ–Ω–∏—è –º–µ—Ç—Ä–∏–∫ —Å–∏—Å—Ç–µ–º—ã —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º —Å–æ–≤—Ä–µ–º–µ–Ω–Ω–æ–≥–æ —Å—Ç–µ–∫–∞ —Ç–µ—Ö–Ω–æ–ª–æ–≥–∏–π:

```
Spring Boot ‚Üí NATS JetStream ‚Üí Apache NiFi ‚Üí Apache HBase
```

### 1. –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤

```bash
docker-compose up -d
```

### 2. –°–æ–∑–¥–∞–Ω–∏–µ —Ç–∞–±–ª–∏—Ü—ã HBase

```bash
chmod +x scripts/create-hbase-table.sh
./scripts/create-hbase-table.sh
```

### 3. –î–æ—Å—Ç—É–ø –∫ Web –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞–º

| –°–µ—Ä–≤–∏—Å | URL | Credentials |
|--------|-----|-------------|
| **NiFi UI** | https://localhost:8443/nifi | admin / adminadminadmin |
| **HBase Master UI** | http://localhost:16010 | - |
| **NATS Monitoring** | http://localhost:8222/jsz?streams=true | - |
| **Spark Web UI** | http://localhost:8080 | - |
| **Storm Web UI** | http://localhost:8081 | - |

## üìñ –î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è

TODO

## üîç –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç—ã

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å NATS Stream
```bash
docker exec mephi-nats nats stream info METRICS
```

### –ü—Ä–æ–≤–µ—Ä–∏—Ç—å HBase
```bash
docker exec -it mephi-hbase hbase shell
scan 'system_metrics', {LIMIT => 10}
```

## Lab 4: Apache Spark - –ê–Ω–∞–ª–∏–∑ —Ç—Ä–∞—Ñ–∏–∫–∞

**–¶–µ–ª—å:** –ü–æ–¥—Å—á–∏—Ç–∞—Ç—å AVG(bytesReceived/bytesSent) —Å –∏–Ω—Ç–µ—Ä–≤–∞–ª–æ–º 10 –º–∏–Ω—É—Ç.

**–ó–∞–ø—É—Å–∫:**

```bash
# 1. –°–æ–∑–¥–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤
./scripts/create-result-table.sh

# 2. –°–æ–±—Ä–∞—Ç—å –∏ –∑–∞–ø—É—Å—Ç–∏—Ç—å
cd spark-app
./gradlew shadowJar
docker exec mephi-spark sh -c "/opt/spark/bin/spark-submit --class NetworkTrafficAnalyzer --master local[*] /opt/spark-apps/network-analyzer.jar"

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
docker exec -i mephi-hbase hbase shell
> scan 'network_traffic_analysis', {LIMIT => 5}
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞:**
- `spark-app/` - standalone Kotlin –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ
- `NetworkTrafficAnalyzer.kt` - –≤–µ—Å—å –∫–æ–¥ –≤ –æ–¥–Ω–æ–º —Ñ–∞–π–ª–µ (204 —Å—Ç—Ä–æ–∫–∏)

**UI:**
- Spark Web UI: http://localhost:8080

## Lab 5: Apache Storm - Spike Detection

**–¶–µ–ª—å:** –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –≤—Å–ø–ª–µ—Å–∫–æ–≤ CPU/Memory –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º Apache Storm –¥–ª—è –ø–æ—Ç–æ–∫–æ–≤–æ–π –æ–±—Ä–∞–±–æ—Ç–∫–∏.

**–û–ø–∏—Å–∞–Ω–∏–µ –∑–∞–¥–∞—á–∏:**

Storm —Ç–æ–ø–æ–ª–æ–≥–∏—è `SpikeDetectorTopology` –æ—Å—É—â–µ—Å—Ç–≤–ª—è–µ—Ç:
- –ü—Ä–∏–µ–º –º–µ—Ç—Ä–∏–∫ –∏–∑ NATS JetStream –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê–Ω–∞–ª–∏–∑ –∏—Å—Ç–æ—Ä–∏—á–µ—Å–∫–∏—Ö –¥–∞–Ω–Ω—ã—Ö –∑–∞ —Å–∫–æ–ª—å–∑—è—â–µ–µ –æ–∫–Ω–æ (–ø–æ—Å–ª–µ–¥–Ω–∏–µ 5 –º–∏–Ω—É—Ç)
- –û–±–Ω–∞—Ä—É–∂–µ–Ω–∏–µ –∞–Ω–æ–º–∞–ª–∏–π —Å –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ–º –∞–ª–≥–æ—Ä–∏—Ç–º–∞ Z-score
- –ü—É–±–ª–∏–∫–∞—Ü–∏—é —Å–æ–±—ã—Ç–∏–π —Å–ø–∞–π–∫–æ–≤ –≤ –ø–æ—Ç–æ–∫ `metrics.spikes`
- –•—Ä–∞–Ω–µ–Ω–∏–µ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ HBase —Ç–∞–±–ª–∏—Ü–µ `spikes`

**–ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞:**
```
NATS JetStream (METRICS)
    ‚Üì
[NatsSpout] - —á–∏—Ç–∞–µ—Ç –º–µ—Ç—Ä–∏–∫–∏
    ‚Üì
[SpikeDetectorBolt] - –∞–Ω–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏ –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç —Å–ø–∞–π–∫–∏
    ‚Üì
[NatsOutputBolt] - –ø—É–±–ª–∏–∫—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã –≤ NATS
    ‚Üì
NATS JetStream (SPIKES)
```

**–ó–∞–ø—É—Å–∫:**

### 1. –ü—Ä–µ–¥–≤–∞—Ä–∏—Ç–µ–ª—å–Ω–∞—è –ø–æ–¥–≥–æ—Ç–æ–≤–∫–∞

```bash
# –£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
docker-compose up -d

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤
docker-compose ps
```

### 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è NATS –ø–æ—Ç–æ–∫–æ–≤

```bash
# –°–æ–∑–¥–∞—Ç—å –Ω–µ–æ–±—Ö–æ–¥–∏–º—ã–µ NATS streams
chmod +x scripts/setup-nats-streams.sh
./scripts/setup-nats-streams.sh

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å–æ–∑–¥–∞–Ω–Ω—ã–µ stream'—ã
docker exec mephi-nats nats stream ls
```

### 3. –†–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ (–†–ï–ö–û–ú–ï–ù–î–£–ï–¢–°–Ø)

```bash
# –ü–µ—Ä–µ–π—Ç–∏ –≤ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏—é –ø—Ä–æ–µ–∫—Ç–∞
cd storm-app

# –ó–∞–ø—É—Å—Ç–∏—Ç—å –∞–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ
chmod +x deploy.sh
./deploy.sh
```

**–ò–ª–∏ —Ä—É—á–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ:**
```bash
cd storm-app
./gradlew shadowJar
docker exec mephi-storm-nimbus storm jar /storm-jars/spike-detector.jar SpikeDetectorTopology spike-detector
```

### 4. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ —Ç–æ–ø–æ–ª–æ–≥–∏—è —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–∞
cd storm-app
./status.sh

# –ò–ª–∏ –Ω–∞–ø—Ä—è–º—É—é —á–µ—Ä–µ–∑ CLI
docker exec mephi-storm-nimbus storm list
```

**–ü—Ä–∏–º–µ—Ä—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è:**

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–ø–∞–π–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏

```bash
# –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–≤—ã–≤–æ–¥–∏—Ç —Å–ø–∞–π–∫–∏ –ø–æ –º–µ—Ä–µ –∏—Ö –æ–±–Ω–∞—Ä—É–∂–µ–Ω–∏—è)
./scripts/watch-spikes.sh

# –ü—Ä–∏–º–µ—Ä –≤—ã–≤–æ–¥–∞:
# [2024-01-15 14:23:45] Spike Detected:
#   Type: cpu_spike
#   Metric: cpu_usage
#   Value: 87.5
#   Severity: high
```

### –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏

```bash
# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å CPU spike –Ω–∞ 60 —Å–µ–∫—É–Ω–¥
./scripts/generate-load.sh --cpu --duration 60

# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å Memory load –Ω–∞ 90 —Å–µ–∫—É–Ω–¥
./scripts/generate-load.sh --memory --duration 90 --memory-size 512

# –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –∫–æ–º–±–∏–Ω–∏—Ä–æ–≤–∞–Ω–Ω—É—é –Ω–∞–≥—Ä—É–∑–∫—É
./scripts/generate-load.sh --both --duration 120 --cpu-threads 8 --memory-size 1024
```

### –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–µ–∑—É–ª—å—Ç–∞—Ç–æ–≤ –≤ HBase

```bash
# –ü–æ–¥–∫–ª—é—á–∏—Ç—å—Å—è –∫ HBase shell
docker exec -it mephi-hbase hbase shell

# –°–∫–∞–Ω–∏—Ä–æ–≤–∞—Ç—å —Ç–∞–±–ª–∏—Ü—É —Å–ø–∞–π–∫–æ–≤
> scan 'spikes', {LIMIT => 10}

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∫–æ–ª–∏—á–µ—Å—Ç–≤–æ —Å–ø–∞–π–∫–æ–≤
> count 'spikes'

# –í—ã—Ö–æ–¥ –∏–∑ shell
> exit
```

### –†–∞–±–æ—Ç–∞ —Å NATS JetStream
e,yh
```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏–∏ –æ –ø–æ—Ç–æ–∫–µ SPIKES
docker exec mephi-nats nats stream info SPIKES

# –°–±–æ—Ä —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∏ –ø–æ —Å–ø–∞–π–∫–∞–º
./scripts/spikes-stats.sh

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ø–æ—Å–ª–µ–¥–Ω–∏—Ö —Å–ø–∞–π–∫–æ–≤ (—Å –Ω–∞—á–∞–ª–∞ –ø–æ—Ç–æ–∫–∞)
docker exec mephi-nats nats sub metrics.spikes --stream SPIKES --all
```

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–æ–≤:**

- `storm-app/` - Kotlin –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –¥–ª—è Storm
  - `SpikeDetectorTopology.kt` - –≥–ª–∞–≤–Ω–∞—è —Ç–æ–ø–æ–ª–æ–≥–∏—è
  - `NatsSpout.kt` - —á–∏—Ç–∞–µ—Ç –∏–∑ NATS JetStream
  - `SpikeDetectorBolt.kt` - –¥–µ—Ç–µ–∫—Ç–∏—Ä—É–µ—Ç –∞–Ω–æ–º–∞–ª–∏–∏
  - `NatsOutputBolt.kt` - –ø—É–±–ª–∏–∫—É–µ—Ç —Ä–µ–∑—É–ª—å—Ç–∞—Ç—ã
- `scripts/` - –≤—Å–ø–æ–º–æ–≥–∞—Ç–µ–ª—å–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥–∞

**–î–æ—Å—Ç—É–ø–Ω—ã–µ —Å–∫—Ä–∏–ø—Ç—ã:**

| –°–∫—Ä–∏–ø—Ç | –ù–∞–∑–Ω–∞—á–µ–Ω–∏–µ |
|--------|-----------|
| `storm-app/deploy.sh` | –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–æ–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏–µ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ |
| `storm-app/undeploy.sh` | –û—Å—Ç–∞–Ω–æ–≤–∫–∞ –∏ —É–¥–∞–ª–µ–Ω–∏–µ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ |
| `storm-app/status.sh` | –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å—Ç–∞—Ç—É—Å–∞ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ–π —Ç–æ–ø–æ–ª–æ–≥–∏–∏ |
| `scripts/setup-nats-streams.sh` | –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è NATS –ø–æ—Ç–æ–∫–æ–≤ |
| `scripts/watch-spikes.sh` | –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–ø–∞–π–∫–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏ |
| `scripts/generate-load.sh` | –ì–µ–Ω–µ—Ä–∞—Ü–∏—è —Ç–µ—Å—Ç–æ–≤–æ–π –Ω–∞–≥—Ä—É–∑–∫–∏ (CPU/Memory) |
| `scripts/spikes-stats.sh` | –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –ø–æ –æ–±–Ω–∞—Ä—É–∂–µ–Ω–Ω—ã–º —Å–ø–∞–π–∫–∞–º |

**Web UI:**

| –ò–Ω—Ç–µ—Ä—Ñ–µ–π—Å | URL |
|-----------|-----|
| **Storm UI** | http://localhost:8081 |
| **NATS Monitoring** | http://localhost:8222/jsz?streams=true |
| **HBase Master UI** | http://localhost:16010 |

**–ü–æ–ª–Ω—ã–π —Ü–∏–∫–ª (–±—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç):**

```bash
# 1. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã –∑–∞–ø—É—â–µ–Ω—ã
docker-compose up -d

# 2. –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å NATS streams
./scripts/setup-nats-streams.sh

# 3. –†–∞–∑–≤–µ—Ä–Ω—É—Ç—å Storm —Ç–æ–ø–æ–ª–æ–≥–∏—é (–≤ –æ–¥–Ω–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ)
cd storm-app && ./deploy.sh

# 4. –í –¥—Ä—É–≥–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ: –ó–∞–ø—É—Å—Ç–∏—Ç—å –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Å–ø–∞–π–∫–æ–≤
./scripts/watch-spikes.sh

# 5. –í —Ç—Ä–µ—Ç—å–µ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ: –ì–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É
./scripts/generate-load.sh --both --duration 60

# 6. –ù–∞–±–ª—é–¥–∞—Ç—å –∑–∞ —Å–ø–∞–π–∫–∞–º–∏ –≤–æ –≤—Ç–æ—Ä–æ–º —Ç–µ—Ä–º–∏–Ω–∞–ª–µ!
```

**Troubleshooting:**

### –ü—Ä–æ–±–ª–µ–º–∞: –¢–æ–ø–æ–ª–æ–≥–∏—è –Ω–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ Docker –∑–∞–ø—É—â–µ–Ω
docker ps

# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ Nimbus –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Å—É—â–µ—Å—Ç–≤—É–µ—Ç
docker ps | grep storm

# –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ Storm
docker logs mephi-storm-nimbus

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã
docker-compose down
docker-compose up -d
```

### –ü—Ä–æ–±–ª–µ–º–∞: –°–ø–∞–π–∫–∏ –Ω–µ –æ–±–Ω–∞—Ä—É–∂–∏–≤–∞—é—Ç—Å—è

```bash
# 1. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ NATS stream —Å–æ–∑–¥–∞–Ω
docker exec mephi-nats nats stream ls

# 2. –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –º–µ—Ç—Ä–∏–∫–∏ –ø–æ—Å—Ç—É–ø–∞—é—Ç –≤ NATS
docker exec mephi-nats nats sub METRICS --stream METRICS --all

# 3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ —Ç–æ–ø–æ–ª–æ–≥–∏–∏
docker exec mephi-storm-nimbus storm logs spike-detector

# 4. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å –±–æ–ª—Ç–æ–≤
docker exec mephi-storm-nimbus storm list
docker exec mephi-storm-nimbus storm top | grep spike-detector
```

### –ü—Ä–æ–±–ª–µ–º–∞: –õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ —Ä–∞–±–æ—Ç–∞–µ—Ç

```bash
# –£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –ª–æ–≥-—Ñ–∞–π–ª—ã –¥–æ—Å—Ç—É–ø–Ω—ã
docker exec mephi-storm-nimbus ls -la /var/log/storm/

# –ü—Ä–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ workera
docker logs mephi-storm-supervisor-1
```

### –ü—Ä–æ–±–ª–µ–º–∞: NATS —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –Ω–µ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, —á—Ç–æ NATS –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä —Ä–∞–±–æ—Ç–∞–µ—Ç
docker ps | grep nats

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å NATS
docker exec mephi-nats nats pub test "hello"

# –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –≤ —Å–µ—Ç–µ–≤–æ–º —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–∏ –º–µ–∂–¥—É –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä–∞–º–∏
docker network ls
docker network inspect mephi-bigdata_default
```

### –û—á–∏—Å—Ç–∫–∞ –∏ –ø–µ—Ä–µ—É—Å—Ç–∞–Ω–æ–≤–∫–∞

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å —Ç–æ–ø–æ–ª–æ–≥–∏—é
cd storm-app && ./undeploy.sh

# –£–¥–∞–ª–∏—Ç—å –≤—Å–µ –∫–æ–Ω—Ç–µ–π–Ω–µ—Ä—ã –∏ —Ç–æ–º—ã
docker-compose down -v

# –ü–µ—Ä–µ—Å–æ–∑–¥–∞—Ç—å –≤—Å–µ
docker-compose up -d
./scripts/setup-nats-streams.sh
cd storm-app && ./deploy.sh
```

**–î–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –∏ —Å—Å—ã–ª–∫–∏:**

- `storm-app/DEPLOY_GUIDE.md` - –ø–æ–¥—Ä–æ–±–Ω–∞—è –∏–Ω—Å—Ç—Ä—É–∫—Ü–∏—è –ø–æ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–Ω–∏—é
- `storm-app/QUICK_REFERENCE.md` - –∫—Ä–∞—Ç–∫–∏–π —Å–ø—Ä–∞–≤–æ—á–Ω–∏–∫ –∫–æ–º–∞–Ω–¥
- `storm-app/IMPLEMENTATION_REPORT.md` - –æ–ø–∏—Å–∞–Ω–∏–µ —Ä–µ–∞–ª–∏–∑–∞—Ü–∏–∏
- `storm-app/NATS_SPOUT_README.md` - –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è NatsSpout

**–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã Storm:**

```bash
# –°–ø–∏—Å–æ–∫ –≤—Å–µ—Ö —Ç–æ–ø–æ–ª–æ–≥–∏–π
docker exec mephi-storm-nimbus storm list

# –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–π —Ç–æ–ø–æ–ª–æ–≥–∏–∏
docker exec mephi-storm-nimbus storm desc spike-detector

# Real-time —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞
docker exec mephi-storm-nimbus storm top

# –õ–æ–≥–∏ —Ç–æ–ø–æ–ª–æ–≥–∏–∏
docker exec mephi-storm-nimbus storm logs spike-detector

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Ç–æ–ø–æ–ª–æ–≥–∏–∏ —Å graceful shutdown
docker exec mephi-storm-nimbus storm kill spike-detector -w 30

# –ü–µ—Ä–µ–∞–∫—Ç–∏–≤–∏—Ä–æ–≤–∞–Ω–∏–µ —Ç–æ–ø–æ–ª–æ–≥–∏–∏
docker exec mephi-storm-nimbus storm activate spike-detector
docker exec mephi-storm-nimbus storm deactivate spike-detector
```

**–ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏:**

```bash
# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ø—Ä–æ—Ü–µ–Ω—Ç –æ–±—Ä–∞–±–æ—Ç–∞–Ω–Ω—ã—Ö –∫–æ—Ä—Ç–µ–∂–µ–π
docker exec mephi-storm-nimbus storm list

# –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–≥—Ä—É–∑–∫—É –Ω–∞ –≤–æ—Ä–∫–µ—Ä—ã
docker logs mephi-storm-supervisor-1 | grep throughput

# –ü–æ–ª—É—á–∏—Ç—å –º–µ—Ç—Ä–∏–∫–∏ –∏–∑ JMX (–µ—Å–ª–∏ –≤–∫–ª—é—á–µ–Ω)
docker exec mephi-storm-nimbus jconsole

# –ê–Ω–∞–ª–∏–∑–∏—Ä–æ–≤–∞—Ç—å –ø—Ä–æ–ø—É—Å–∫–Ω—É—é —Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç—å –ø–æ—Ç–æ–∫–∞
./scripts/spikes-stats.sh
```